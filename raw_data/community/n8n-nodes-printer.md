# n8n-nodes-printer

![Banner image](https://user-images.githubusercontent.com/10284570/173569848-c624317f-42b1-45a6-ab09-f0ea3c247648.png)

This community node for n8n allows you to print files directly from your workflows via a [CUPS (Common UNIX Printing System)](https://www.cups.org/) server.

This node acts as a client for your CUPS server, which must be online and accessible from your n8n instance. The server itself will manage all your printer drivers and configurations.

## Features

-   **Dynamic File Printing**: Instead of a fixed file path, the node accepts binary data. This allows you to print files downloaded from an HTTP request, generated by another node, or read from a disk, all within the same workflow.
-   **Printer Discovery**: Automatically discovers available printers on your CUPS server.
-   **Basic Print Options**: Control the number of copies and specify page ranges.
-   **Advanced CUPS Options**: For power users, a JSON field allows you to pass any additional CUPS-specific options (`-o`) for total control over your print jobs (e.g., paper size, quality, orientation, duplex printing).

## Prerequisites

This node executes the `lp` command. Therefore, the `cups-client` package must be installed in the environment where n8n is running.

### Docker Installation

If you are using Docker for n8n, you need to add the installation of `cups-client` to your Dockerfile. Here is an example for a Debian/Ubuntu-based image:

```Dockerfile
# Add this line to your n8n Dockerfile
RUN apt-get update && apt-get install -y cups-client && rm -rf /var/lib/apt/lists/*
```

### Dealing with 'The printer or class does not exist' Error

This common error can occur if your n8n instance cannot resolve the printer's network name, especially if it's not on the same local network. To fix this, you must explicitly tell the CUPS client where the server is.

You can add this to your Dockerfile:

```Dockerfile
# Replace 192.168.1.100 with the actual IP address of your CUPS server
RUN echo "ServerName 192.168.1.100" >> /etc/cups/client.conf
```

## Node Usage

1.  **CUPS Server IP**: Enter the IP address of your CUPS server. This is required for the node to discover printers.
2.  **Select Printer**: Choose a printer from the auto-discovered list or manually enter the printer queue name.
3.  **Binary Property**: Specify the name of the binary property from the input item that contains the file you want to print (e.g., `data`).
4.  **Options (Optional)**:
    *   **Quantity**: Set the number of copies.
    *   **Page Range**: Define a specific page range (e.g., `1-5, 8`).
    *   **Advanced CUPS Options**: For full control, provide a JSON object with any other options supported by your printer. These will be passed directly to the `lp` command.

### Example for Advanced CUPS Options

To print a document in A4 landscape format, on both sides of the paper, you could use the following JSON in the "Advanced CUPS Options" field:

```json
{
  "media": "A4",
  "orientation-requested": "4",
  "sides": "two-sided-long-edge"
}
```

## License

[MIT](https://github.com/n8n-io/n8n-nodes-starter/blob/master/LICENSE.md)
